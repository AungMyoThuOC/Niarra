(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{539:function(e,t,i){"use strict";i.r(t);i(8),i(61),i(212),i(326);var n=i(1),s=i(5),o=i(342),r=i(163),a=i(10),l=i(24);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var d=function(){function e(t){var i=t.el;u(this,e),this._isOpen=!1,this.el=i}return c(e,[{key:"setSize",value:function(e,t){this._width=e,this._height=t,this.el.style.width="".concat(e,"px")}},{key:"getTweenProgress",value:function(){var e=n.a.timeline();return e.fromTo(this.el,{x:this._getPositionByProgress(0)},{x:this._getPositionByProgress(1),ease:"none"},0),e}},{key:"getTweenTransitionOpen",value:function(){var e=n.a.timeline();return e.to(this.el,{x:this._getPositionByProgress(.5)}),e}},{key:"getTweenTransitionClose",value:function(e){var t=n.a.timeline();return t.to(this.el,{x:this._getPositionByProgress(e)}),t}},{key:"_getPositionByProgress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=-.5*this._width,n=2*e-1;return i+n*t}}]),e}(),g=function(){function e(t){var i=t.el;u(this,e),this.el=i,this.ui={icon:this.el.querySelector(".js-category-icon"),highlight:this.el.querySelector(".js-category-highlight"),label:this.el.querySelector(".js-category-label"),circle:this.el.querySelector(".js-category-circle"),svg:this.el.querySelector(".js-category-icon svg")}}return c(e,[{key:"getTweenTransitionOpen",value:function(){var e=n.a.timeline();return e.to(this.ui.icon,{scale:1.2,duration:.8,ease:l.b},0),e.to(this.ui.highlight,{autoAlpha:1,duration:.4,ease:"sine.out"},0),e.to(this.ui.circle,{borderColor:"white",duration:.4,ease:"sine.out"},0),e.to(this.ui.svg,{fill:"white",duration:.4,ease:"sine.out"},0),e.to(this.ui.label,{x:a.resizeManager.rem(10),duration:.6,ease:"power2.out"},0),e}},{key:"getTweenTransitionClose",value:function(){var e=n.a.timeline();return e.to(this.ui.icon,{scale:1,duration:.6,ease:"elastic.out(1.0, 0.8)"},0),e.to(this.ui.highlight,{autoAlpha:0,duration:.4,ease:"sine.out"},0),e.to(this.ui.circle,{borderColor:"black",duration:.4,ease:"sine.out"},0),e.to(this.ui.svg,{fill:"black",duration:.4,ease:"sine.out"},0),e.to(this.ui.label,{x:0,duration:.6,ease:"power2.out"},0),e}}]),e}(),p=function(){function e(t){var i,n,s,o=this,r=t.el,a=t.container,l=t.drag;u(this,e),s=function(){o._setProgress()},(n="_dragChangePositionHandler")in(i=this)?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,this.isOpen=!1,this.id=r.dataset.id,this.drag=l,this.el=r,this.container=a,this.ui={background:this.el.querySelector(".js-background"),category:this.el.querySelector(".js-category")},this.components={background:new d({el:this.ui.background}),category:new g({el:this.ui.category})},this._setBounds(),this._setSize(),this._setProgress(),this._setupEventListeners()}return c(e,[{key:"destroy",value:function(){}},{key:"open",value:function(){this.isOpen=!0,this.el.classList.add("is-open"),this._tlClose&&(this._tlClose.kill(),this._tlClose=null),this._tlOpen=n.a.timeline(),this._tlOpen.to(this.el,{width:2.5*this._bounds.width,duration:1,ease:l.b},0),this._tlOpen.add(this.components.category.getTweenTransitionOpen(),0),this._tlOpen.add(this.components.background.getTweenTransitionOpen(),0)}},{key:"close",value:function(){this.isOpen=!1,this.el.classList.remove("is-open"),this._tlOpen&&(this._tlOpen.kill(),this._tlOpen=null),this._tlClose=n.a.timeline(),this._tlClose.to(this.el,{width:this._bounds.width,duration:1,ease:l.b},0),this._tlClose.add(this.components.category.getTweenTransitionClose(),0),this._tlClose.add(this.components.background.getTweenTransitionClose(this.progress),0)}},{key:"_setupEventListeners",value:function(){this.drag.addEventListener("change:position",this._dragChangePositionHandler)}},{key:"_removeEventListeners",value:function(){this.drag.removeEventListener("change:position",this._dragChangePositionHandler)}},{key:"_setBounds",value:function(){this._containerBounds=this.container.getBoundingClientRect();var e=this.el.getBoundingClientRect();this._bounds={width:e.width,height:e.height,x:e.x-this._containerBounds.x,y:e.y-this._containerBounds.y}}},{key:"_setSize",value:function(){this.components.background.setSize(2.5*this._bounds.width,this._bounds.height)}},{key:"_setProgress",value:function(){var e=a.resizeManager.viewportWidth,t=this._bounds.x+.5*this._bounds.width-.5*this._containerBounds.width,i=this._bounds.width+.5*e,s=n.a.utils.clamp(0,1,n.a.utils.normalize(t-i,t+i,this.drag.position));s!==this.progress&&(this.progress=s,this._tlProgress||(this._tlProgress=n.a.timeline({paused:!0}),this._tlProgress.add(this.components.background.getTweenProgress(),0)),this.isOpen||this._tlProgress.progress(this.progress))}}]),e}(),v=i(322);function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f=function(){function e(t){var i=this,s=t.el;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"_tickHandler",(function(){i._setScrollIndicatorProgress()})),y(this,"_clickHandler",(function(e){if(i.expandEnabled)for(var t,n=e.currentTarget.dataset.id,s=0,o=i.components.highlightedExampleTrips.length;s<o;s++)(t=i.components.highlightedExampleTrips[s]).id!==n||t.isOpen?t.close():t.open()})),y(this,"_clickButtonPreviousHandler",(function(){var e=i.components.carousel.drag.position,t=l.e,n=e+-i._cardWidth;i.components.carousel.navigate(n<i._summaryWidth?0:n,{duration:.6,ease:t}),v.a.trackEvent({event:"click",category:"highlighted example trips",action:"previous",label:"button previous"})})),y(this,"_clickButtonNextHandler",(function(){var e=i.components.carousel.drag.position,t=l.e,n=i._cardWidth;i.components.carousel.navigate(e+n,{duration:.6,ease:t}),v.a.trackEvent({event:"click",category:"highlighted example trips",action:"next",label:"button next"})})),y(this,"_dragChangePositionHandler",(function(){i._isButtonPreviousHidden&&i.components.carousel.drag.position>0&&(i._isButtonPreviousHidden=!1,n.a.to(i.ui.buttonPrevious,{autoAlpha:1,duration:.2,ease:"sine.inOut"})),i._isButtonPreviousHidden||0!==i.components.carousel.drag.position||(i._isButtonPreviousHidden=!0,n.a.to(i.ui.buttonPrevious,{autoAlpha:0,duration:.2,ease:"sine.out"}))})),this.el=s,this.ui={carousel:this.el.querySelector(".js-carousel"),highlightedExampleTrips:n.a.utils.toArray(this.el.querySelectorAll(".js-highlighted-example-trip")),buttonPrevious:this.el.querySelector(".js-button-previous"),buttonNext:this.el.querySelector(".js-button-next"),scrollIndicator:this.el.querySelector(".js-scroll-indicator")};var o=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(i._create(),o.unobserve(i.el))}))}));o.observe(this.el)}var t,i,a;return t=e,(i=[{key:"_create",value:function(){var e=this,t=new o.a({el:this.ui.carousel,snapCenter:!0});this.components={carousel:t,scrollIndicator:new r.a({el:this.ui.scrollIndicator}),highlightedExampleTrips:this.ui.highlightedExampleTrips.map((function(i){return new p({el:i,container:e.ui.carousel,drag:t.drag})}))},this.ui.highlightedExampleTrips.length<2&&(this.components.carousel.destroy(),this._hideUI()),this._isButtonPreviousHidden=!0,this._tracker=s.c.track({element:this.el,container:"pages"}),this._setSize(),this._setupEventListeners()}},{key:"destroy",value:function(){this.components.carousel.destroy(),this.components.scrollIndicator.destroy(),this._removeEventListeners()}},{key:"_setupEventListeners",value:function(){this.components.carousel.drag.addEventListener("change:position",this._dragChangePositionHandler);for(var e=0,t=this.ui.highlightedExampleTrips.length;e<t;e++)this.ui.highlightedExampleTrips[e].addEventListener("click",this._clickHandler);this.ui.buttonPrevious.addEventListener("click",this._clickButtonPreviousHandler),this.ui.buttonNext.addEventListener("click",this._clickButtonNextHandler),n.a.ticker.add(this._tickHandler)}},{key:"_removeEventListeners",value:function(){for(var e=0,t=this.ui.highlightedExampleTrips.length;e<t;e++)this.ui.highlightedExampleTrips[e].removeEventListener("click",this._clickHandler);n.a.ticker.remove(this._tickHandler)}},{key:"_setScrollIndicatorProgress",value:function(){var e=this.components.carousel.drag,t=e.position,i=e.limit;this.components.scrollIndicator.setProgress(n.a.utils.clamp(0,1,t/i))}},{key:"_setSize",value:function(){this._summaryWidth=this.components.carousel.ui.items[0].clientWidth,this._cardWidth=this.components.carousel.ui.items[1].clientWidth}},{key:"_hideUI",value:function(){n.a.set([this.ui.buttonNext,this.ui.scrollIndicator],{autoAlpha:0})}}])&&_(t.prototype,i),a&&_(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=f}}]);